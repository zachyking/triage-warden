<table class="table">
  <thead>
    <tr>
      <th>Channel</th>
      <th>Type</th>
      <th>Events</th>
      <th>Status</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    {% for channel in notification_channels %}
    <tr id="notification-row-{{ channel.id }}">
      <td class="font-semibold">{{ channel.name }}</td>
      <td>{{ channel.channel_type }}</td>
      <td>
        {% for event in channel.events %}
        <span class="badge badge-info mr-1">{{ event }}</span>
        {% endfor %}
      </td>
      <td>
        <button class="btn btn-ghost btn-sm"
                hx-post="/api/notifications/{{ channel.id }}/toggle"
                hx-swap="none"
                hx-on::after-request="if(event.detail.successful) { showToast('success', 'Channel Updated', 'Notification channel status has been toggled.'); location.reload(); }">
          <span class="badge badge-{% if channel.enabled %}success{% else %}info{% endif %}">
            {% if channel.enabled %}Active{% else %}Disabled{% endif %}
          </span>
        </button>
      </td>
      <td>
        <div class="flex gap-2">
          <button class="btn btn-ghost btn-sm"
                  hx-get="/web/modals/edit-notification/{{ channel.id }}"
                  hx-target="#modal-container"
                  hx-swap="innerHTML">Edit</button>
          <button class="btn btn-ghost btn-sm"
                  hx-post="/api/notifications/{{ channel.id }}/test"
                  hx-swap="none"
                  hx-on::after-request="if(event.detail.successful) { showToast('success', 'Test Sent', 'A test notification has been sent to this channel.'); } else { showToast('error', 'Test Failed', 'Could not send test notification. Check your configuration.'); }">Test</button>
          <button class="btn btn-ghost btn-sm text-danger"
                  hx-delete="/api/notifications/{{ channel.id }}"
                  hx-confirm="Are you sure you want to delete this notification channel?"
                  hx-swap="none"
                  hx-on::after-request="if(event.detail.successful) { showToast('success', 'Channel Deleted', 'Notification channel has been removed.'); location.reload(); }">Delete</button>
        </div>
      </td>
    </tr>
    {% endfor %}
    {% if notification_channels.is_empty() %}
    <tr>
      <td colspan="5" class="text-center text-muted py-4">
        No notification channels configured. Click "Add Channel" to create one.
      </td>
    </tr>
    {% endif %}
  </tbody>
</table>
